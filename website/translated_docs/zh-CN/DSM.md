---
id: DSM
title: DSM
sidebar_label: DSM
---

去中心化存储市场(Decentralized Storage Market, DSM)提供了一个去中心化的IPFS Pin服务。存储用户可以在链上发起订单，而订单对应文件则会相应的被Crust节点存储。DSM同时也针对文件的检索进行了激励，使得节点有意愿提供检索服务。

DSM 包含 4个主要机制。详细机制请参考[经济白皮书](https://crust-data.oss-cn-shanghai.aliyuncs.com/crust-home/whitepapers/ecowhitepaper.pdf):

### 1. 价格机制

存储订单费用包含了四个部分：动态基础费用, 动态文件大小费用(链上根据文件大小以及存储供需关系计算得出), 动态键值费用(链上根据文件键值数目计算得出)以及小费；

- 基础费用会根据当前网络文件吞吐量进行自动调整
- 动态文件大小费用会根据存储供需关系进行自动调整
- 动态键值费用会根据链上已存在的文件总数进行自动调整

### 2. 存储订单机制

当用户在Crust上生成一笔存储订单时：
   * 参考EIP1559，动态基础费用目前会进入税收池，之后会通过民主模块对税收池的收益的使用方式进行投票。
   * 动态文件大小费用以及动态键值费用的部分金额（金额的18%）将会进入文件奖励池，部分金额（金额的10%）将会进入文件税收池，剩下的部分将会加入全网Staking奖励池。
   * 小费是用户自愿提供给存储商户的，所有费用会进入文件奖励池。
   * 任何节点一旦存储了该文件，并提交了存储证明，即可进入该文件的奖励节点列表。前四个进入奖励列表的节点将会平分这个文件奖励池中的金额。
   * 在奖励列表中的文件都可以获得质押额度奖励。也就是说，存储该文件的商户的质押上限会相应增加。

![dsm](https://crust-data.oss-cn-shanghai.aliyuncs.com/wiki/learn/dsm.png)

### 3. 文件续费以及清算
* 文件续费: 在Crust网络中，每个文件拥有一个文件续费池，用户可以将用于续费的 CRU 预先充值到这个续费池，任何时候网络中的其它代理人（包括用户自己）都可以使用续费池中的资金对文件续单。在文件还在有效期时，代理人操作续单没有收益。当文件过期后，代理人操作续单会收到代理收入。


* 文件清算: 用户下订单存储文件后，接到订单的前 4 个商户可以持续获取订单收益，这份收益需要主动的申请才能被商户领取。订单结算机制是 Crust 网络为了更好的管理文件订单系统而设计的机制。任何一个 Crust 的用户可以作为清算人去结算网络中还未结算的订单。当被结算的订单是已经过期的订单时，清算人会收到代理结算收益。清算人通过锁定 CRU 能获得一定的清算手续费减免。

### 4. 检索机制
在为数据存储提供激励时，DSM同时为数据的检索提供激励。为了使节点提供检索，DSM的检索激励机制如下：
   * Crust网络中的数据检索机制遵循 [IPFS Bitswap协议](https://docs.ipfs.io/concepts/bitswap/)。数据可以在整个IPFS网络节点之间进行共享和交换。
   * Crust网络提供更高效的检索评分机制。在Bitswap协议中，节点通过“信用”机制来抵制只拉取数据而不提供检索的“吸血”节点。Crust网络在原有的Bitswap信用机制上，加入了可信的链上信息供节点参考，使得Crust网络的信用机制更加高效。
   * Crust网络节点提供可靠的供检索服务。Crust网络节点的早期收益来自于[网络质押——GPoS共识](GPoS.md)，而存储更多用户文件可以有效增加节点的有效质押额度。结合Crust网络的信用机制，节点在利益驱动下，为了获得更大的质押额度，就需要获取更多用户文件，也就需要相应的提供更多的检索服务。

用户可以在[Crust Apps](https://apps.crust.network/#/storage)上体验DSM功能。
